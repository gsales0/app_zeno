<section class="componente">
    <span class="componente">
        Cadastro de Clientes & Fornecedores
    </span>

    <div class="ferramentas">
        <button
        class="ferramentas"
        (click)="novoRegistro()"
        [disabled]="telaRegistro && !modoConsulta"
        >
            Incluir
        </button>

        <button
        class="ferramentas"
        [disabled]="(telaRegistro && !modoConsulta) || !dataRow.ID_CREDOR"
        (click)="alterarRegistro()"
        >
            Alterar
        </button>

        <button
        class="ferramentas"
        [disabled]="(telaRegistro && !modoConsulta) || !dataRow.ID_CREDOR"
        (click)="consultarRegistro()"
        >
            Consultar
        </button>

        <button
        class="ferramentas"
        [disabled]="(telaRegistro && !modoConsulta) || !dataRow.ID_CREDOR"
        (click)="excluirRegistro()"
        >
            Excluir
        </button>
    </div>

    <div class="container" *ngIf="!telaRegistro">
        <div class="pesquisar">
            <label for="PESQUISAR">
                Pesquisar:
            </label>

            <label for="ID_MES">
                Mês:
            </label>

            <br>

            <select name="ID_MES" id="ID_MES">
                <option value="1">01 - JANEIRO</option>
                <option value="2">02 - FEVEREIRO</option>
                <option value="3">03 - MARÇO</option>
                <option value="4">04 - ABRIL</option>
                <option value="5">05 - MAIO</option>
                <option value="6">06 - JUNHO</option>
                <option value="7">07 - JULHO</option>
                <option value="8">08 - AGOSTO</option>
                <option value="9">09 - SETEMBRO</option>
                <option value="10">10 - OUTUBRO</option>
                <option value="11">11 - NOVEMBRO</option>
                <option value="12">12 - DEZEMBRO</option>
            </select>

            <input
            type="search"
            name="PESQUISAR"
            id="PESQUISAR"
            >

            <button class="pesquisar" (click)="buscarGrid()" >
                Buscar
            </button>

            <button class="pesquisar">
                Filtrar
            </button>
        </div>

        <div class="datagrid">
            <table class="datagrid">
                <thead>
                    <tr>
                        <th style="width: 10%">
                            Código:
                        </th>
                        <th>
                            Nome:
                        </th>
                        <th style="width: 15%">
                            Tipo:
                        </th>
                        <th style="width: 20%">
                            CPF/CNPJ:
                        </th>
                        <th style="width: 10%">
                            Ativo:
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr
                    *ngFor="let i of dataGrid"
                    (click)="dataRow.ID_CREDOR = i.ID_CREDOR"
                    [ngClass]="{ 'selecionada' : dataRow.ID_CREDOR === i.ID_CREDOR }"
                    >
                        <td>
                            {{ (i.CD_CREDOR).toString().padStart(4, '0') }}
                        </td>
                        <td>
                            {{ i.NM_CREDOR }}
                        </td>
                        <td>
                            {{ i.TP_CREDOR }}
                        </td>
                        <td>
                            {{ i.CADASTRO }}
                        </td>
                        <td>
                            {{ i.SN_ATIVO ? "Sim" : "Não" }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="container" *ngIf="telaRegistro">
        <form
        class="dataform"
        #dataForm="ngForm"
        (ngSubmit)="salvarEditando ? editarRegistro() : salvarRegistro()"
        >

            <!-- LINHA 01 -->
            <label for="CD_CREDOR" style="width: 10%">
                Código:
            </label>

            <label for="NM_CREDOR" style="width: 65%">
                Nome:
            </label>

            <label for="TP_CREDOR" style="width: 14%;">
                Tipo:
            </label>

            <br>

            <input
            type="number"
            name="CD_CREDOR"
            id="CD_CREDOR"
            [(ngModel)]="dataRow.CD_CREDOR"
            [class.invalido]="!dataRow.CD_CREDOR"
            [disabled]="modoConsulta"

            min="1" max="9999"
            style="width: 10%"
            required
            >

            <input
            type="text"
            name="NM_CREDOR"
            id="NM_CREDOR"
            [(ngModel)]="dataRow.NM_CREDOR"
            [class.invalido]="!dataRow.NM_CREDOR"
            [disabled]="modoConsulta"

            maxlength="100"
            style="width: 65%"
            required
            >

            <select
            name="TP_CREDOR"
            id="TP_CREDOR"
            [(ngModel)]="dataRow.TP_CREDOR"
            [class.invalido]="!dataRow.TP_CREDOR"
            [disabled]="modoConsulta"

            style="width: 15%"
            required
            >
                <option hidden></option>
                <option value="F">Física</option>
                <option value="J">Jurídica</option>
            </select>

            <br>

            <!-- LINHA 02 -->
            <label for="CADASTRO" style="width: 8rem">
                CPF/CNPJ:
            </label>

            <label for="CONTATO" style="width: 6rem">
                Contato:
            </label>

            <label for="EMAIL" style="width: 15rem">
                Email:
            </label>

            <br>

            <input
            type="text"
            name="CADASTRO"
            id="CADASTRO"
            [(ngModel)]="dataRow.CADASTRO"
            [class.invalido]="!dataRow.CADASTRO"
            [disabled]="modoConsulta"

            style="width: 8rem"
            required
            >

            <input
            type="number"
            name="CONTATO"
            id="CONTATO"
            [(ngModel)]="dataRow.CONTATO"
            [class.invalido]="!dataRow.CONTATO"
            [disabled]="modoConsulta"

            maxlength="11"
            style="width: 6rem"
            required
            >

            <input
            type="email" 
            name="EMAIL" 
            id="EMAIL"
            [(ngModel)]="dataRow.EMAIL"
            [disabled]="modoConsulta"

            maxlength="100"
            style="width: 18rem"
            >
            <br>

            <label for="UF_CREDOR" style="width: 4rem">
                Estado:
            </label>

            <label for="CIDADE" style="width: 10rem">
                Cidade:
            </label>

            <label for="ENDERECO" style="width: 18rem;">
                Endereço:
            </label>

            <select
            name="UF_CREDOR"
            id="UF_CREDOR"
            [(ngModel)]="dataRow.UF_CREDOR"
            [disabled]="modoConsulta"

            style="width: 4.5rem"
            >
                <option hidden></option>
                <option value="AC">AC</option>
                <option value="AL">AL</option>
                <option value="AP">AP</option>
                <option value="AM">AM</option>
                <option value="BA">BA</option>
                <option value="CE">CE</option>
                <option value="DF">DF</option>
                <option value="ES">ES</option>
                <option value="GO">GO</option>
                <option value="MA">MA</option>
                <option value="MT">MT</option>
                <option value="MS">MS</option>
                <option value="MG">MG</option>
                <option value="PA">PA</option>
                <option value="PB">PB</option>
                <option value="PR">PR</option>
                <option value="PE">PE</option>
                <option value="PI">PI</option>
                <option value="RJ">RJ</option>
                <option value="RN">RN</option>
                <option value="RS">RS</option>
                <option value="RO">RO</option>
                <option value="RR">RR</option>
                <option value="SC">SC</option>
                <option value="SP">SP</option>
                <option value="SE">SE</option>
                <option value="TO">TO</option>
            </select>

            <input
            type="text"
            name="CIDADE"
            id="CIDADE"
            [(ngModel)]="dataRow.CIDADE"
            [disabled]="modoConsulta"

            maxlength="100"
            style="width: 10rem"
            >

            <input
            type="text"
            name="ENDERECO"
            id="ENDERECO"
            [(ngModel)]="dataRow.ENDERECO"
            [disabled]="modoConsulta"

            maxlength="100"
            style="width: 18rem"
            >

            <label for="OBSERVACOES" style="width: 85%;">
                Observações:
            </label>

            <label for="SN_ATIVO">
                Ativo:
            </label>

            <input
            type="checkbox"
            name="SN_ATIVO"
            id="SN_ATIVO"
            [(ngModel)]="dataRow.SN_ATIVO"
            [disabled]="modoConsulta"
            >
            
            <br>

            <textarea
            name="OBSERVACOES"
            id="OBSERVACOES"
            [(ngModel)]="dataRow.OBSERVACOES"
            [disabled]="modoConsulta"
            ></textarea>

            <div class="executores">
                <button
                type="button"
                class="executores"
                (click)="cancelarRegistro()"
                >
                    {{ modoConsulta ? "Voltar" : "Cancelar"}}
                </button>

                <button
                type="submit"
                class="executores"
                [disabled]="dataForm.invalid"
                *ngIf="!modoConsulta"
                >
                    {{ salvarEditando ? "Salvar Alteração" : "Salvar Registro" }}
                </button>
            </div>
        </form>
    </div>

</section>


<dialog #modal class="modal">
    <span class="modal">
        {{ mensagem }}
    </span>
    
    <br><br>

    <button
    class="modal"
    (click)="fecharModal()"
    >
        Confirmar!
    </button>
</dialog>